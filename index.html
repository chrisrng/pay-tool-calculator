<!doctype html>
<html>
<head>
  <title>Sliding Scale Calculator</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="How to set sliding scale fees for your practice. The Sliding Scale  Calculator is a tool to calculate what your expected annual compensation will be given a range of sliding scale rates and other factors. Useful for psychologists, therapists, lawyers, or any practice who use a sliding scale, adjusted scale, variable scale, or fee scale rates.">

  <!-- favicon -->
  <link rel="apple-touch-icon" sizes="180x180" href="./favicon_io/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="./favicon_io/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="./favicon_io/favicon-16x16.png">
  <link rel="manifest" href="./favicon_io/site.webmanifest">

  <!-- CSS -->
  <link rel="stylesheet" href="./tailwindcss3023.css">

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-TMJ31QJVG5"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-TMJ31QJVG5');
  </script>
</head>
<body>
  <div class="py-4 bg-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="lg:text-center">
        <h2 class="text-base text-indigo-600 font-semibold tracking-wide uppercase">Pay Tool Calculator</h2>
        <p class="mt-2 text-3xl leading-8 font-extrabold tracking-tight text-gray-900 sm:text-4xl">Find your sliding scale</p>
        <p class="my-4 max-w-2xl text-xl text-gray-500 lg:mx-auto">How to set sliding scale fees for your practice.</p>
      </div>

      <div class="bg-white shadow overflow-hidden sm:rounded-lg">
        <div class="px-4 py-5 sm:px-6">
          <h3 class="text-md font-bold leading-6 text-gray-900">Total Compensation</h3>
          <p class="mt-1 max-w-2xl text-lg font-medium text-indigo-500" id="total-compensation">$</p>
        </div>
        <div class="border-t border-gray-200">
          <dl>
            <div class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
              <dt class="text-sm font-medium text-red-400 uppercase">Total Overhead (Yearly)</dt>
              <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                <input class="rounded py-2 px-4 xl:w-1/2 w-full bg-red-100 appearance-none" id="overhead" type="number" />
              </dd>
            </div>
            <div class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
              <dt class="text-sm font-medium text-gray-500">Working Weeks Per Year</dt>
              <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                <input type="range" id="workingweeks" min="1" max="52" class="rounded xl:w-1/2 w-full h-2 bg-indigo-100 appearance-none" />
                <p class="xl:w-1/2 w-full mt-2 sm:text-center" id="workingweeks-val"></p>
              </dd>
            </div>
            <div class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
              <dt class="text-sm font-medium text-gray-500">Full Fee Sessions (Per Week)</dt>
              <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                <input type="range" id="marketsessions" min="0" max="40" class="rounded xl:w-1/2 w-full h-2 bg-indigo-100 appearance-none" />
                <p class="xl:w-1/2 w-full mt-2 sm:text-center" id="marketsessions-val"></p>
              </dd>
            </div>
            <div class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
              <dt class="text-sm font-medium text-gray-500">Sliding Rate Sessions (Per Week)</dt>
              <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                <input type="range" id="slidingsessions" min="0" max="40" class="rounded xl:w-1/2 w-full h-2 bg-indigo-100 appearance-none" />
                <p class="xl:w-1/2 w-full mt-2 sm:text-center" id="slidingsessions-val"></p>
              </dd>
            </div>
            <div class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
              <dt class="text-sm font-medium text-gray-500">Market Rate</dt>
              <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                <input class="rounded py-2 px-4 xl:w-1/2 w-full bg-indigo-100 appearance-none" id="market" type="number" />
              </dd>
            </div>
            <div class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
              <dt class="text-sm font-medium text-gray-500">Highest Sliding Rate</dt>
              <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                <input type="range" id="highest" min="0" max="999" class="rounded xl:w-1/2 w-full h-2 bg-indigo-100 appearance-none" />
                <p class="xl:w-1/2 w-full mt-2 sm:text-center" id="highest-val"></p>
              </dd>
            </div>
            <div class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
              <dt class="text-sm font-medium text-gray-500">Lowest Sliding Rate</dt>
              <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                <input type="range" id="lowest" min="0" max="999" class="rounded xl:w-1/2 w-full h-2 bg-indigo-100 appearance-none" />
                <p class="xl:w-1/2 w-full mt-2 sm:text-center" id="lowest-val"></p>
              </dd>
            </div>
          </dl>
        </div>
      </div>

    </div>
  </div>
  <p class="text-center text-muted text-sm font-medium text-gray-400 pb-2">Created by <a href="https://twitter.com/chrisrng" target="_blank">Chris Ng</a></p>
</body>
<script>
  window.onload = () => {
    // Load existing local storage if available
    if (window.localStorage && localStorage.getItem('context')) {
      this.findYourRateContext = JSON.parse(localStorage.getItem('context'));
    } else {
      this.findYourRateContext = {};
    }
    const {
      overhead = 10000,
      workingweeks = 40,
      marketsessions = 20,
      slidingsessions = 20,
      market = 250,
      highest = 150,
      lowest = 100
    } = this.findYourRateContext;

    // Parameters
    setupNumberInputListener(this.findYourRateContext, 'overhead', overhead);
    setupRangeInputListener(this.findYourRateContext, 'workingweeks', workingweeks);

    // Sessions
    setupRangeInputListener(this.findYourRateContext, 'marketsessions', marketsessions);
    setupRangeInputListener(this.findYourRateContext, 'slidingsessions', slidingsessions);

    // Rates
    setupNumberInputListener(this.findYourRateContext, 'market', market);
    setupRangeInputListener(this.findYourRateContext, 'highest', highest);
    setupRangeInputListener(this.findYourRateContext, 'lowest', lowest);

    // Initialize
    findRate(this.findYourRateContext);
  };

  function findRate(context) {
    const { overhead, workingweeks, marketsessions, slidingsessions, market, highest, lowest } = context;
    const marketComp = marketsessions * market;
    const slidingCompHigh = slidingsessions * highest;
    const slidingCompLow = slidingsessions * lowest;

    const resultHigh = (((marketComp + slidingCompHigh) * workingweeks) - overhead)
      .toLocaleString('en-US', {
        style: 'currency',
        currency: 'USD',
      });
    const resultLow = (((marketComp + slidingCompLow) * workingweeks) - overhead)
      .toLocaleString('en-US', {
        style: 'currency',
        currency: 'USD',
      });

    // Print Result
    const resultElem = document.querySelector('#total-compensation');
    resultElem.innerHTML = `${resultLow} - ${resultHigh}`;

    // Save to local storage
    if (window.localStorage) {
      localStorage.setItem('context', JSON.stringify(context));
    }
  }

  function setupRangeInputListener(context, inputId, initialVal) {
    // Initialize values in context and template
    context[inputId] = initialVal;
    const inputElem = document.querySelector(`#${inputId}`);
    const valId = `${inputId}-val`;
    const valElem = document.querySelector(`#${valId}`);
    inputElem.value = initialVal;
    valElem.innerHTML = initialVal;

    inputElem.addEventListener('input', (event) => {
      const value = event.target.valueAsNumber;
      valElem.innerHTML = value;
      context[inputId] = value;
      findRate(context);
    });
  }

  function setupNumberInputListener(context, inputId, initialVal) {
    // Initialize values in context and template
    context[inputId] = initialVal;
    const inputElem = document.querySelector(`#${inputId}`);
    inputElem.value = initialVal;

    inputElem.addEventListener('input', (event) => {
      const value = event.target.valueAsNumber;
      context[inputId] = value;
      findRate(context);
    });
  }
</script>
</html>
